{% extends 'base_backoffice.html.twig' %}

{% block title %}Liste des cours{% endblock %}

{% block body %}
	<!-- Title -->
		<div class="row mb-3">
			<div class="col-12 d-sm-flex justify-content-between align-items-center">
				<h1 class="h3 mb-2 mb-sm-0">Courses</h1>
				<a href="{{ path('app_cours_new') }}" class="btn btn-sm btn-primary mb-0">Create a Course</a>
			</div>
		</div>

		<!-- Course boxes START -->
		<div class="row g-4 mb-4">
			<!-- Course item -->
			<div class="col-sm-6 col-lg-4">
				<div class="text-center p-4 bg-primary bg-opacity-10 border border-primary rounded-3">
					<h6>Total Courses</h6>
					<h2 class="mb-0 fs-1 text-primary">1200</h2>
				</div>
			</div>

			<!-- Course item -->
			<div class="col-sm-6 col-lg-4">
				<div class="text-center p-4 bg-success bg-opacity-10 border border-success rounded-3">
					<h6>Activated Courses</h6>
					<h2 class="mb-0 fs-1 text-success">996</h2>
				</div>
			</div>

			<!-- Course item -->
			<div class="col-sm-6 col-lg-4">
				<div class="text-center p-4  bg-warning bg-opacity-15 border border-warning rounded-3">
					<h6>Pending Courses</h6>
					<h2 class="mb-0 fs-1 text-warning">200</h2>
				</div>
			</div>
		</div>
		<!-- Course boxes END -->

		<!-- Card START -->
		<div class="card bg-transparent border">

			<!-- Card header START -->
			<div class="card-header bg-light border-bottom">
				<!-- Search and select START -->
				<div class="row g-3 align-items-center justify-content-between">
					<!-- Search bar -->
					<div class="col-md-8">
					<form method="get" action="{{ path('app_cours_index') }}" class="rounded position-relative">
						<input class="form-control bg-body" type="search" name="search" placeholder="Search by title, subject or level" aria-label="Search" value="{{ searchQuery }}">
							</button>
						</form>
					</div>

					<!-- Select option -->
					<div class="col-md-3">
						<!-- Short by filter -->
						<form>
							<select name="sort" onchange="this.form.submit()" class="form-select js-choice border-0 z-index-9" aria-label=".form-select-sm">
								<option value="">Default</option>
								<option value="a-z" {{ sort == 'a-z' ? 'selected' : '' }}>Titre A-Z</option>
								<option value="niveau-asc" {{ sort == 'niveau-asc' ? 'selected' : '' }}>Niveau ASC</option>
								<option value="niveau-desc" {{ sort == 'niveau-desc' ? 'selected' : '' }}>Niveau DESC</option>
							</select>
						</form>
					</div>
				</div>
				<!-- Search and select END -->
			</div>
			<!-- Card header END -->

			<!-- Card body START -->
			<div class="card-body">
				<!-- Course table START -->
				<div class="table-responsive border-0 rounded-3">
					<!-- Table START -->
					<table class="table table-dark-gray align-middle p-4 mb-0 table-hover">
						<!-- Table head -->
						<thead>
							<tr>
								<th scope="col" class="border-0 rounded-start">Nom du Cours</th>
								<th scope="col" class="border-0">Matiére</th>
								<th scope="col" class="border-0">Niveau</th>
								<th scope="col" class="border-0 rounded-end">Action</th>
							</tr>
						</thead>
						
						<!-- Table body START -->
						<tbody>
							{% for c in cours %}
							<!-- Table row -->
							<tr>
								<!-- Table data -->
								<td>
									<div class="d-flex align-items-center position-relative">
										<!-- Image -->
										<div class="w-60px">
											<img src="{{ asset('uploads/images/cours/' ~ c.image) }}" class="rounded" alt="">
										</div>
										<!-- Title -->
										<h6 class="table-responsive-title mb-0 ms-2">	
											<a href="#" class="stretched-link">{{ c.titre }}</a>
										</h6>
									</div>
								</td>

								<!-- Table data -->
								<td>
									<div class="d-flex align-items-center mb-3">
										<!-- Info -->
										<div class="ms-2">
											<h6 class="mb-0 fw-light">{{ c.matiere }}</h6>
										</div>
									</div>
								</td>
								<!-- Table data -->
								<td> <span class="badge text-bg-primary">{{ c.niveau }}</span> </td>

								<!-- Table data -->
								<td>
									<a href="{{ path('app_cours_show', {'id': c.id}) }}" class="btn btn-sm btn-success-soft me-1 mb-1 mb-md-0">Detail</a>
                                    <a href="{{ path('app_cours_edit', {'id': c.id}) }}" class="btn btn-sm btn-warning-soft me-1 mb-1 mb-md-0">Modifier</a>
                                    <form method="post" action="{{ path('app_cours_delete', {'id': c.id}) }}" style="display:inline;">
                                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ c.id) }}">
                                        <button type="submit" class="btn btn-sm btn-danger-soft mb-0" onclick="return confirm('Supprimer ce cours ?')">Supprimer</button>
                                    </form>
								</td>
							</tr>
                            {% else %}
                            <tr>
                                <td colspan="5">Aucun cours trouvé.</td>
                            </tr>
                        {% endfor %}
						</tbody>
						<!-- Table body END -->
					</table>
					<!-- Table END -->
				</div>
				<!-- Course table END -->
			</div>
			<!-- Card body END -->

			<!-- Card footer START -->
			<div class="card-footer bg-transparent pt-0">
				<!-- Pagination START -->
				<div class="d-sm-flex justify-content-sm-between align-items-sm-center">
					<!-- Content -->
					<p class="mb-0 text-center text-sm-start">Showing 1 to 8 of 20 entries</p>
					<!-- Pagination -->
					{{ knp_pagination_render(cours) }}
				</div>
				<!-- Pagination END -->
			</div>
			<!-- Card footer END -->
		</div>
		<!-- Card END -->
{% endblock %}